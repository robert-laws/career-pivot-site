---
const base = import.meta.env.BASE_URL;

function getPath(path: string) {
    // Ensure base ends with slash or handle root properly
    // But BASE_URL is usually "/" or "/subpath/".
    // If base is "/", path "/paths" -> "//paths" which is valid but ugly.
    // Better to strip leading slash from path if base is not "/"
    const cleanBase = base.endsWith("/") ? base.slice(0, -1) : base;
    return `${cleanBase}${path}`;
}

const links = [
    { href: getPath("/paths"), label: "Career Paths" },
    { href: getPath("/framework"), label: "The Framework" },
    { href: getPath("/markets"), label: "Markets" },
    { href: getPath("/dashboard"), label: "Dashboard" },
];

const { pathname } = Astro.url;
// Normalize pathname for active state check
const normalizedPathname = pathname.endsWith("/")
    ? pathname.slice(0, -1)
    : pathname;
---

<nav>
    <ul class="flex space-x-6 md:space-x-10 text-sm md:text-base font-medium">
        {
            links.map(({ href, label }) => (
                <li>
                    <a
                        href={href}
                        class:list={[
                            "hover:text-accent-terra transition-colors duration-200",
                            {
                                "border-b-2 border-accent-sage":
                                    normalizedPathname.startsWith(href),
                            },
                        ]}
                    >
                        {label}
                    </a>
                </li>
            ))
        }
    </ul>
</nav>
